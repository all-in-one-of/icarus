#!/usr/bin/python

# [Icarus] about.py
#
# Mike Bonnington <mike.bonnington@gps-ldn.com>
# (c) 2015-2018 Gramercy Park Studios
#
# Pop-up 'About' dialog / splash screen


import os

from Qt import QtCompat, QtCore, QtWidgets
import about_rc  # Import resource file as generated by pyside-rcc


# ----------------------------------------------------------------------------
# Configuration
# ----------------------------------------------------------------------------

# Set the UI and the stylesheet
UI_FILE = "about_ui.ui"


# ----------------------------------------------------------------------------
# Main dialog class
# ----------------------------------------------------------------------------

class dialog(QtWidgets.QDialog):
	""" Main dialog class.
	"""
	def __init__(self, parent=None):
		super(dialog, self).__init__(parent)

		# Load UI
		uifile = os.path.join(os.environ['IC_FORMSDIR'], UI_FILE)
		self.ui = QtCompat.loadUi(uifile, self)

		# Set window flags
		self.setWindowFlags(QtCore.Qt.Popup)


	def display(self, message=""):
		""" Display message in about dialog.
		"""
		if message:
			self.ui.aboutMessage_label.setText(message)

		# Move to centre of active screen
		desktop = QtWidgets.QApplication.desktop()
		screen = desktop.screenNumber(desktop.cursor().pos())
		self.move(desktop.screenGeometry(screen).center() - self.frameGeometry().center())

		self.exec_()


	def mousePressEvent(self, QMouseEvent):
		""" Close about dialog if mouse is clicked.
		"""
		self.hide()

